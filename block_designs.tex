\chapter{Blokové plány}

\section{Definícia, základné vlastnosti}

\begin{definition}

Vyvážený nekompletný blokový plán (angl. \emph{balanced incomplete block design}) $BIBD(v, b, r, k, \lambda)$ je usporiadaná dvojica $(X, \mathcal{B})$, kde $X$ je množina objektov a $\mathcal{B} \subset \powerset(X)$ je množina podmnožín objektov (tieto podmnožiny voláme \emph{bloky}), pričom sú splnené nasledujúce podmienky:

\begin{enumerate}
    \item $v = |X|$ je mohutnosť množiny objektov.
    \item $b = |\mathcal{B}|$ je mohutnosť množiny blokov.
    \item každý blok má mohutnosť $k$.
    \item každý bod je obsiahnutý v práve $r$ blokoch.
    \item každá dvojica bodov sa vyskytuje v práve $\lambda$ blokoch. 
\end{enumerate}
\end{definition}

\begin{theorem}
$\exists BIBD(v, b, r, k, \lambda) \Longleftrightarrow $ $\lambda$-násobný kompletný multigraf rádu~$v$ $\lambda K_v$
sa dá rozložiť na $b$ hranovo disjunktných klík rádu~$k$ ($K_k$).
\end{theorem}


\begin{proof}
Množina objektov $X$ zodpovedá množine vrcholov multigrafu. 
Výskyt dvojice objektov v bloku zodpovedá hrane v multigrafe.
Samotné bloky zodpovedajú kompletným klikám.

Formálna konštrukcia je z toho očividná.
\end{proof}

\begin{theorem}
\label{th:bibd_params}
Nech existuje $BIBD(v, b, r, k, \lambda)$. Potom:
\begin{enumerate}
    \item $vr = bk$
    \item $\lambda (v-1) = r (k-1)$
\end{enumerate}
\end{theorem}


\begin{exercise}
Dokážte vetu \ref{th:bibd_params}. \emph{Hint: prvá rovnosť vyjadruje celkový počet bodov vo všetkých blokoch (s opakovaním), druhá rovnosť vyjadruje celkový počet hrán pre jeden vrchol v zodpovedajúcom multigrafe.}
\end{exercise}

\begin{corollary}
Preto namiesto značenia $BIBD(v, b, r, k, \lambda)$ budeme často
použivať značenie $BIBD(v, k, \lambda)$, nakoľko 
zvyšné parametre vieme dorátať: 
$$r := \dfrac{\lambda (v-1)}{k-1},~ b := \dfrac{\lambda v (v-1)}{k (k-1)}$$
\end{corollary}

\begin{theorem}

Nech existuje $BIBD(v, b,r, k, \lambda)$, kde $X = \set{x_1, x_2, \ldots, x_v}$ a $\mathcal{B} = \set{B_1, \ldots, B_b}$. 
Nech matica incidencie $A \in \set{0, 1}^{v \times b}$ je matica typu $v\times b$, kde $A_{ij} = 1$ práve vtedy, keď $x_i \in B_j$.
Potom $A A^T = (r-\lambda) I_v + \lambda J_{v}$, kde $I_v$ je matica identity rádu $v$ a $J_v$ je matica jednotiek typu $v \times v$.
\end{theorem}

\begin{proof}
Pozrieme sa na jednotlivé políčka matice $A A^T$:
\begin{equation*}
(AA^T)_{ik} = \sum_{j=1}^b (A)_{ij} (A^T)_{jk} = \sum_{j=1}^b (A)_{ij} (A)_{kj} = \sum_{j=1}^b [x_i \in B_j] [x_k \in B_j] = \sum_{j=1}^b [x_i \in B_j \wedge x_k \in B_j]
\end{equation*}
Slovne povedané, políčko $(AA^T)_{ik}$ sa rovná počtu blokov, kde sa naraz vyskytujú prvky $x_i$ a $x_k$.
V prípade, že $i = k$, $(AA^T)_{ik} = r$, nakoľko sa v blokovom pláne každý prvok vyskytuje v práve $r$ blokoch.
V opačnom prípade $(AA^T)_{ik} = \lambda$, nakoľko sa každá dvojica prvkov v blokovom pláne vyskytuje v práve $\lambda$ blokoch.

Čiže matica $AA^T$ má na diagonále číslo $r$ a mimo diagonály číslo $\lambda$, čo presne vyjadruje vzorec $A A^T = (r-\lambda) I_v + \lambda J_{v}$. 
\end{proof}


\begin{lemma}
\label{lem:aat_det}
Nech $A$ je matica incidencie blokového plánu $BIBD(v, b,r, k, \lambda)$. Potom $det(AA^T) = (r-\lambda)^{v-1} (v\lambda - \lambda + r)$.
\end{lemma}

\begin{proof}
Z lineárnej algebry vieme, že determinant matice je súčinom všetkých jej vlastných čísel (s násobnosťami).
Takže treba nájsť všetky vlastné čísla matice $A A^T = (r-\lambda) I_v + \lambda J_{v}$.
Číslo $x$ je vlastným číslom matice $M$ práve vtedy keď je riešením rovnice $det(M - xI) = 0$.
Napíšeme si túto rovnicu pre maticu $AA^T$:
$$det((r-\lambda - x) I_v + \lambda J_{v}) = 0$$

Ak $r-\lambda - x = 0$, tak celá matica v determinante má hodnosť $1$, čiže $x = r - \lambda$ je $(v-1)$-násobným vlastným číslom matice $AA^T$. 
Čiže zostáva nájsť ešte jedno vlastné číslo násobnosti $1$.
Z toho vyplýva, že po dosadení $x$ do rovnosti by sme dostali maticu hodnosti $(v-1)$, čiže jediným prejavom lineárnej závislosti je lineárna kombinácia všetkých riadkov matice.
Po chvíli rozmýšľania nás môže napadnúť rovnosť $(r - \lambda - x) = - v \lambda$, čím docielime, že súčet čísel v každom stĺpci je nula.
Teda, číslo $x =r - \lambda + v\lambda $ je vlastným číslom matice $A A^T$ s násobnosťou 1.

Z toho vyplýva, že $det(AA^T) = (r - \lambda)^{v-1}(r - \lambda + v \lambda)$, čím je dôkaz ukončený.
\end{proof}

\begin{corollary}
Ak $BIBD(v, b,r, k, \lambda)$ je blokový plán a $b=v$, tak matica incidencie $A$ je regulárna a matici $A^T$ tiež zodpovedá nejaký blokový plán.
\end{corollary}

\begin{remark}
Blokové plány také, že $b = v$, voláme symetrické.
\end{remark}


\begin{theorem}{(Fisherova nerovnosť)}
Nech existuje blokový plán $BIBD(v, b,r, k, \lambda)$. Potom $b \geq v$.
\end{theorem}


\begin{proof}
Zjavne $r \geq \lambda$, lebo sa každý prvok v rámci dvojice vyskytuje v práve $\lambda$ blokoch, čiže aj počet výskytov každého prvku samostatne musí byť aspoň $\lambda$.
Rozoberieme teraz dva prípady: $r = \lambda$ a $r > \lambda$.

Nech $r = \lambda$. 
Pozorujme prvok $x \in X$.
BUNV sa prvok $x$ nachádza v blokoch $B_1, \ldots, B_r$.
Keďže sa každá dvojica $(x, y)$ vyskytuje práve $r$ krát, tak sa každý prvok $y \in X$ musí nachádzať v blokoch $B_1, \ldots, B_r$.
Čiže, bloky $B_1, \ldots, B_r$ majú mohutnosť $v$, čiže $b = v$, čím je požadované tvrdenie dokázané.

Nech teraz $r > \lambda$.
Potom z lemy \ref{lem:aat_det} matica $AA^T$ je regulárna, čiže $rank(AA^T) = v$.
Z lineárnej algebry vieme, že hodnosť matíc je aspoň tak veľká ako hodnosť ich súčinu, t.j. $rank(A) \geq rank(AA^T) = v$.
Na druhej strane, matica $A$ je typu $v \times b$, čiže $b \geq rank(A)$.
Syntézou dvoch nerovností dostaneme $b \geq rank(A) \geq v$, čím je dôkaz ukončený.
\end{proof}


\begin{corollary}
Nech existuje blokový plán $BIBD(v, b,r, k, \lambda)$. Potom $r \geq k$.
\end{corollary}

\section{Cyklické blokové plány a diferenčné množiny}

\begin{definition}

Množina $D = \set{d_1, \ldots, d_k} \subset \mathbb{Z}_v$ mohutnosti $k$ sa volá $(v, k, \lambda)$-diferenčnou množinou, ak 
pre každý nenulový prvok $a \in \mathbb{Z}_v$ existuje práve $\lambda$ usporiadaných dvojíc $(d_i, d_j) \in D^2$ takých, že
$d_i - d_j \equiv a \mod v$. 
\end{definition}

\begin{remark}

Množina $\set{0, 1, 3}$ je $(7, 3, 1)$-diferenčnou množinou.

\end{remark}

\begin{remark}

Podobným spôsobom je možné definovať diferenčné množiny nad konečnými grupami rádu $v$.

\end{remark}


\begin{toreview}
\begin{exercise}
Nájdite bez pomoci počítača ďalšie dve $(7, 3, 1)$-diferenčné množiny.
\end{exercise}

\begin{exercise}
Napíšte program, ktorý overí, či zadaná na vstupe množina je $(v, k, \lambda)$-diferenčnou množinou pre nejaké parametre $v, k, \lambda$.
\end{exercise}

\begin{exercise}
Napíšte brute-force program na generovanie diferenčných množín so zadanými parametrami $v, k, \lambda$\footnote{na bežných strojoch jednoduchý program v Pythone zvláda generovať diferenčné množiny s parametrom $ v \leq 25$ do niekoľkých sekúnd}.
\end{exercise}
\end{toreview}

\begin{toreview}
\begin{lemma}
Nech pre dané $v, k$ a $\lambda$ existuje $(v,k,\lambda)$-diferenčná množina. Potom platí $$k(k-1) = \lambda(v-1).$$
\end{lemma}

\begin{definition}
Nech $D = \{d_1, \ldots, d_k\}$ je množina, a nech $a$ je prirodzené číslo. Potom množinu $\{a + d_1, \ldots, a + d_k\} =: a + D$ voláme \emph{transláciou} množiny $D$.
\end{definition}

\begin{lemma}
Všetky translácie jednej diferenčnej množiny sú navzájom rôzne. 
\end{lemma}
\begin{proof}
Nech je daná $(v,k,\lambda)$-diferenčná množina $D = \{d_1, \ldots, d_k\}$.
\end{proof}

\end{toreview}


\begin{definition}
$(v, k, \lambda)$-BIBD je cyklický, ak existuje permutácia s cyklom dĺžky $v$ taká, že zachováva bloky\footnote{
bijektívne zobrazenia množiny na ňu samu, ktoré zachovávajú vzťahy medzi objektami, sa všeobecne nazývajú \emph{automorfizmy}}. 
Formálne, blokový plán je cyklický, ak 
existuje permutácia  $\phi \in S_v$ s cyklom dĺžky $v$ taká, že 
$$\mathcal{B} = \set{\set{\phi(x_1), \ldots, \phi(x_k)} ~|~ \set{x_1, \ldots, x_k} \in \mathcal{B} }$$
\end{definition}

\begin{theorem}
Množina $D = \set{d_1, \ldots, d_k}$ je $(v, k, \lambda)$-diferenčná množina práve vtedy, keď $(X, \mathcal{B})$, kde $X = \mathbb{Z}_v$ a $\mathcal{B} = \set{D + i ~|~ \forall i \in \mathbb{Z}_v}$ ($D + i := \set{d_1 + i, \ldots, d_k + i}$), je cyklický $(v, k, \lambda)$-BIBD. 
\end{theorem}

\begin{toreview}
\begin{proof}

\todo[inline]{napisat neskor, necitim sa na to teraz}
\end{proof}
\end{toreview}

\begin{definition}
\label{def:fpp1}
Nech $F$ je konečné pole. Nech $V \cong F^{n+1}$ je vektorový priestor dimenzie $n+1$ nad poľom $F$. 
Definujeme reláciu $\sim$ nad prvkami $V^* := V - \set{\vec{0}}$:

$$\forall \vec{a},\vec{b} \in V^*: \left( \vec{a} \sim \vec{b} \overset{def}{\Longleftrightarrow} \exists k \in F: \vec{a} = k \vec{b} \right)$$

Potom rozklad $V^*$ na triedy ekvivalencie $\mathbb{P}^n(V) := \faktor{V^*}{\sim}$ je $n$-rozmerná projektívna rovina nad $F$.

Projektívnu rovinu dimenzie $n$ nad konečným poľom s $q = p^r$ prvkami označujeme ako $PG(n, q) := \mathbb{P}^n\left( \mathbb{Z}_p^r \right)$

\end{definition}

\begin{theorem_hard}{(Typ S dif. množín --- Singerove dif. množiny)\footnote{\TODO je to bez dokazu ci s dokazom?}}\\
Nech množina $D$ obsahuje všetky nadroviny konečnej projektívnej roviny $PG(n, q)$ 
(nadrovina je faktorový obraz vektorového podriestoru dimenzie $n$). 
Potom $D$ je $(v, k, \lambda)$-diferenčná množina s parametrami:
$$v = \dfrac{q^{n+1}-1}{q-1}, k = \dfrac{q^n - 1}{q-1}, \lambda = \dfrac{q^{n-1}-1}{q-1}$$
\end{theorem_hard}

\begin{theorem_hard}{(Typ Q dif. množín --- kvadratické rezíduá, angl. \emph{Paley-type})}\\
Nech $F := GF(p^l)$ je konečné pole mohutnosti $p^l$, kde $p^l \equiv 3 \mod 4$. 
Nech $r \in F$ je generátor grupy $F^\ast := (F-\set{0}, \ast)$. 
Potom množina kvadratických rezíduí grupy $F^*$ $QR(F^*) := \set{r^a \mod p^l ~|~ a \in \set{0, \ldots, p^l-1} \wedge a~\text{je párne} }$
je $(v, k, \lambda)$-diferenčnou množinou s parametrami:

$$v = p^l = 4t-1, k = 2t - 1, \lambda = t-1$$

\end{theorem_hard}

\begin{remark}

Existujú aj ďalšie triedy diferenčných množín, napríklad bikvadratické rezíduá alebo tzv. \emph{twin prime power difference set}.

\end{remark}
\begin{toreview}

\todo[inline]{rozpisat bikvadraticke rezidua}
\todo[inline]{rozpisat twin prime power}
\end{toreview}


\section{Hadamardove matice}

\begin{definition}
Matica $H \in \set{-1, +1}^{n \times n}$ je Hadamardovou maticou rádu $n$, ak $HH^T = nI_n$ (t.j. všetky riadky sú navzájom ortogonálne).
\end{definition}

\begin{theorem}
Nech matica $H$ je Hadamardova matica rádu $n$. Potom platí:
\begin{enumerate}
    \item výmenou riadkov (stĺpcov) matice $H$ dostaneme Hadamardovu maticu
    \item matica $H$ je normálna, t.j. $HH^T = H^T H$
\end{enumerate}
\end{theorem}

\begin{toreview}
\begin{proof}
Prvé tvrdenie je očividné a nepotrebuje špeciálny dôkaz.
Druhé tvrdenie sa dá odvodiť pomocou zopár jednoduchých ekvivalentných maticových úprav.

Kľúčové pozorovanie je, že matice s ortogonálnymi riadkami (stĺpcami)\footnote{je nesprávne volať Hadamardovu maticu ''ortogonálnou'', pretože sa historicky tento pojem vyhradzuje pre matice, ktorých stĺpce sú \emph{ortonormálne}, t.j. sú navzájom ortogonálne a zároveň majú dĺžku $1$, t.j. sú normované.} matice sú vždy regulárne, čiže majú inverznú maticu (pre Hadamardovu maticu $H$ je to matica $n^{-1} H^T$).
Pre nás však je dôležité, že násobenie regulárnou maticou pre maticové rovnice je ekvivalentnou úpravou\footnote{technicky, tento dôkaz sa dá napísať aj bez využitia ekvivalentných úprav, ale bolo by to menej intuitívne. Čitateľ je však vítaný otočiť poradie maticových úprav a tešiť sa z toho.}.
\begin{align*}
    HH^T \overset{?}{=}&~ H^TH&\text{vynásobiť zľava regulárnou maticou $H$}\\
    H(HH^T) \overset{?}{=}&~ (HH^T)H&\text{asociativita a definícia H. matíc}\\
    HnI_n \overset{?}{=}&~ nI_nH&\text{...}\\
    H \overset{\checkmark}{=}&~ H&\text{}
\end{align*}
Teda, pomocou ekvivalentných úprav sme sa dostali od pôvodného tvrdenia ku triviálne platnému, čiže aj pôvodné tvrdenie je nutne platné.
\end{proof}
\end{toreview}

\begin{definition}
Hadamardova matica je v normálnom tvare, ak prvý riadok aj prvý stĺpec obsahujú iba hodnoty $+1$.
\end{definition}

\begin{theorem}
\label{th:hadam_det}
Nech $H$ je Hadamardova matica rádu $n$. Potom $\det{H}~=~\sqrt{n^n}$.

\end{theorem}
\begin{toreview}
\begin{exercise}
Dokážte vetu \ref{th:hadam_det} \emph{(hint: z definície Hadamardovej matice)}.
\end{exercise}

\end{toreview}

\begin{theorem_hard}{(Hadamardov odhad)}\\
Nech $M \in \mathbb{C}^{n\times n}$ je komplexná matica typu $n\times n$, kde $\ssize{(M)_{ij}} \leq 1$. 
Nech $H$ je ľubovoľná Hadamardova matica rádu $n$.
Potom platí:

$$\det{M} \leq \det{H} = \sqrt{n^n}$$

\end{theorem_hard}

\begin{theorem}
Ak $H$ je Hadamardova matica rádu $n$, tak $n$ je buď $1$, $2$ alebo násobok~$4$. 
\end{theorem}

\begin{toreview}
\begin{proof}
\todo[inline]{spravit dokaz}
\end{proof}
\end{toreview}

\begin{hypothesis}{(Hadamard)}\\
$\forall n \in \set{1, 2} \cup \set{4k ~|~ k \in \mathbb{N}} \Longrightarrow$~existuje Hadamardova matica rádu $n$. 
\end{hypothesis}


\begin{theorem}{(Hadamard, Sylvester)}\\
\label{th:hadam_kron}
Ak $H$, $H'$ su Hadamardove matice, tak aj $H \otimes H'$ je tiež Hadamardova matica ($\otimes$~je Kroneckerov súčin matíc).
\end{theorem}

\begin{toreview}
\begin{exercise}
Dokážte vetu \ref{th:hadam_kron}.
\end{exercise}
\end{toreview}


\begin{theorem}
Normalizovaná Hadamardova matica rádu $4\mu$ existuje práve vtedy, keď existuje $(4\mu-1, 2\mu-1, \mu-1)$-diferenčná množina (typ Q). 
\end{theorem}

\begin{toreview}
\begin{construction}
\todo[inline]{spravit konstrukciu}
\end{construction}
\end{toreview}

\section{Konečné projektívne roviny}

Jedna (algebraická) definícia konečnej projektívnej roviny (angl. \emph{finite projective plane}, alebo skrátene FPP) 
už bola daná v sekcii o diferenčných množinách (definícia \ref{def:fpp1}). V tejto sekcii uvedieme iné dve definície: 
axiomatickú a kombinatorickú.


\begin{definition}{(Axiómy konečnej projektívnej roviny)}\\
\label{def:fpp2}
Pojmy bodu a priamky sú brané ako primitívne pojmy. 
Relácie ''bod leží na priamke'' (značíme $p \in l$) a ''priamka prechádza bodom'' považujeme za primitívne relácie.

Usporiadaná trojica $\pi = (X, \mathfrak{P}, \in)$, kde $X$ je konečná množina bodov, $\mathfrak{P}$ je konečná množina priamok
a $\in$ je relácia ''patrí'' medzi bodmi a priamkami, je konečnou projektívnou rovinou, ak spĺňa nasledujúce axiómy:

\begin{enumerate}
    \item Každými dvomi rôznymi bodmi prechádza \textbf{práve 1} priamka.
    \item Každé dve rôzne priamky majú \textbf{práve 1} spoločný bod.
    \item existujú 4 body vo všeobecnej geometrickej polohe, t.j. žiadnou trojicou
    z~týchto bodov nevedie žiadna priamka.
\end{enumerate}
\end{definition}


\begin{theorem_hard}{(Desarguesova veta)}\\
\TODO obrázok
\end{theorem_hard}


\begin{theorem}
\label{th:fpp_ax_4}
V konečnej projektívnej rovine (v zmysle definície \ref{def:fpp2}) existujú 4 priamky také,
že žiadna trojica z týchto priamok nemá spoločný bod.
\end{theorem}

Čitateľ si môže všimnúť, že ak vymeníme v danom axiomatickom systéme pojmy ''priamka'' a ''bod'',
tak dostaneme ekvivalentný systém axióm. Je ľahko nahliadnuť, 
že ak v ľubovolnom platnom tvrdení o konečných projektívnych rovinách vymeníme tieto pojmy, tak
znovu dostaneme platné tvrdenie. Takéto tvrdenia voláme duálne (napríklad, prvá axióma je duálna ku druhej a tretia axióma
je duálna ku vete \ref{th:fpp_ax_4}).

\begin{theorem}
Nech $\pi$ je konečná projektívna rovina 
a nech $n$ je prirodzené 
číslo väčšie alebo rovné 2. 
Potom nasledujúce tvrdenia sú ekvivalentné:
\begin{enumerate}
    \item každá priamka obsahuje práve $n+1$ bodov
    \item každý bod leží na práve $n+1$ priamkach (duálne ku 1.)
    \item nejaká priamka obsahuje práve $n+1$ bodov
    \item nejaký bod leží na práve $n+1$ priamkach (duálne ku 3.)
    \item konečná projektívna rovina $\pi$ má práve $n^2+n+1$ priamok
    \item konečná projektívna rovina $\pi$ má práve $n^2+n+1$ bodov (duálne ku 5.)
\end{enumerate}
\end{theorem}


\begin{definition}{(Kombinatorická definícia FPP)}\\
Konečná projektívna rovina rádu $n$ je $BIBD(v, k, \lambda)$ s parametrami:
$$v = n^2 + n + 1, k = n + 1, \lambda = 1$$
\end{definition}

\begin{theorem}
Kombinatorická a axiomatická definície konečnej projektívnej roviny sú ekvivalentné. 
\end{theorem}

\begin{theorem_hard}
Ak $n$ je mocninou prvočísla, tak existuje konečná projektívna rovina rádu $n$.
\end{theorem_hard}

\begin{hypothesis}
Ak existuje konečná projektívna rovina rádu $n$, tak $n$ je mocninou prvočísla.
\end{hypothesis}

\begin{definition}

Matica $C = (c_{ij})$ typu $n \times m$, kde $n \geq 4, m \geq 4$ a $c_{ij} \in \set{1, \ldots, n}$,  
má latinskú vlastnosť, ak ľubovoľná podmatica z dvoch stĺpcov matice $C$ nemá rovnaké riadky. Formálne,

$$\forall (i, j) \neq (k, l): (c_{ij}, c_{il}) \neq (c_{jk}, c_{jl})$$

Navyše, ak podmatica matice $C$, tvorená prvými dvomi stĺpcami, obsahuje postupne všetky dvojice čísel $\set{1, \ldots, n}$
v lexikografickom poradí, tak ju voláme matica s latinskou vlastnosťou v normálnom tvare.
\end{definition}

\begin{theorem}
Nech $n \geq 3, t \geq 2$. Potom množina $t$ navzájom ortogonálnych latinských štvorcov rádu $n$ existuje práve vtedy,
keď existuje matica typu $n^2 \times (t+2)$ s latinskou vlastnosťou v normálnom tvare.
\end{theorem}

\begin{theorem}
Existencia konečnej projektívnej roviny rádu $n$ je ekvivalentná s existenciou $(n-1)$ navzájom ortogonálnych latinských štvorcov rádu $n$.
\end{theorem}

\begin{construction}
\TODO
\end{construction}

\section{Steinerovské systémy trojíc, zovšeobecnenia}

\begin{definition}
Blokové plány typu $BIBD(v, 3, 1)$ sa volajú Steinerovské systémy trojíc (angl. \emph{Steiner triplet system}, skrátene STS).
\end{definition}

\begin{remark}
Existencia STS je ekvivalentná s existenciou rozkladu kompletného grafu $K_v$ na trojuholníky.
\end{remark}

\begin{theorem}
\label{th:sts_nec}
Ak $v$ je počet objektov STS, tak $v \equiv 1 \mod 6$ alebo $v \equiv 3 \mod 6$.
\end{theorem}

\begin{theorem_hard}{(Kirkman)}\\
Ak $v$ spĺňa podmienky z vety \ref{th:sts_nec}, tak existuje STS s práve $v$ objektmi.
\end{theorem_hard}

\begin{theorem}{(Projektívne STS)\footnote{\TODO treba dôkaz?}}\\
Nech $X := \left(\mathbb{Z}_2\right)^{n+1} - \set{\vec{0}}$ je množina vektorov vektorového priestoru dimenzie $n+1$ nad poľom $\mathbb{Z}_2$ bez nulového vektora a 
$\mathcal{B} := \set{\set{\vec{x}, \vec{y}, \vec{z}} ~|~ \vec{x} + \vec{y} + \vec{z} = \vec{0}}$.
Potom dvojica $(X, \mathcal{B})$ je STS. Alternatívne, množina priamok projektívnej roviny $PG(2, n)$ tvorí STS.
\end{theorem}

\begin{theorem}{(Afinné STS)\footnote{\TODO treba dôkaz?}}\\
Nech $X := \left(\mathbb{Z}_3\right)^{n}$ je množina vektorov vektorového priestoru dimenzie $n$ nad poľom $\mathbb{Z}_3$. 
Nech $\mathcal{B} := \set{\set{\vec{x}, \vec{y}, \vec{z}} ~|~ \vec{x} + \vec{y} + \vec{z} = \vec{0}}$. Potom 
dvojica $(X, \mathcal{B})$ je STS.
\end{theorem}

\begin{theorem}{(Karteziansky súčin STS)}\\
Nech dvojice $(X, \mathcal{B})$ a $(Y, \mathcal{C})$ sú STS. Potom dvojica $(X \times Y, \mathcal{D})$, kde:
\begin{enumerate}
    \item $y \in Y, \set{b_1, b_2, b_3} \in \mathcal{B} \Longrightarrow \set{(b_1, y), (b_2, y), (b_3, y)} \in \mathcal{D}$
    \item $x \in X, \set{c_1, c_2, c_3} \in \mathcal{C} \Longrightarrow \set{(x, c_1), (x, c_2), (x, c_3)} \in \mathcal{D}$
    \item $\set{b_1, b_2, b_3} \in \mathcal{B}, \set{c_1, c_2, c_3} \in \mathcal{C}, \phi \in S_3 \Longrightarrow 
            \set{(b_1, c_{\phi(1)}), (b_2, c_{\phi(2)}), (b_3, c_{\phi(3)})} \in \mathcal{D}$ (kde $\phi$ je permutácia veľkosti $3$) 
\end{enumerate}

Potom $(X \times Y, \mathcal{D})$ je STS.
\end{theorem}


\begin{theorem}{(Vzťah STS a grupoidov)}\\
Nech $(X, \mathcal{B})$ je STS. Potom množina $X$ s binárnou operáciou $\ast$, definovanou nasledovne:
\begin{align*}
    \forall \set{x,y,z} \in \mathcal{B}:\\
    x\ast y = y \ast x = z\\ 
    x \ast z = z \ast x = y\\ 
    y\ast z = z \ast y = x\\
    x \ast x = x
\end{align*}

je idempotentný komutatívny grupoid. 
\end{theorem}


\begin{theorem}{(($2v +1$)-konštrukcia STS)}\\
Nech $(X, \mathcal{B})$ je STS a $(X', \mathcal{B}')$ je jeho disjunktná izomorfná kópia (t.j. $X \cap  X' = \varnothing$). Obraz prvku $x$ v tomto izomorfizme budeme značiť $x'$. 
Nech prvok $\infty \notin X \cup X'$.
Potom dvojica $(Y, \mathcal{C})$, kde $Y := X \cup X' \cup \set{\infty}$ a $\mathcal{C} := \mathcal{B} 
\cup \set{\set{x, y', z'} ~|~ \set{x,y,z}\in \mathcal{B}} 
\cup \set{\set{x, x', \infty} ~|~ x \in X}$, je STS.    
\end{theorem}

\TODO Paschovo prepnutie

\begin{theorem}{Wilson-Schreiberova konštrúkcia}\\
	Nech $n \equiv \pm 1 \pmod6$ je také celé číslo, že číslo $-2$ má v grupe $(\mathbb{Z}^*_n, \cdot)$ párny rád. Potom existuje STS rádu $n + 2$.
\end{theorem}

\begin{proof}
	Uvažujme všetky neusporiadané trojice $\langle a, b, c \rangle$ takých prvkov $\mathbb{Z}_n$, že $a + b + c = 0$. Tieto trojice sú troch typov:
	\begin{enumerate}
		\item $\langle a, b, c \rangle$, $a$, $b$, $c$ sú navzájom rôzne,
		\item $\langle a, b, c \rangle = \langle a, a, -2a \rangle$,
		\item $\langle a, b, c \rangle = \langle 0, 0, 0 \rangle$.
	\end{enumerate}
	Nech multiplikatívny rád čísla $-2$ modulo $n$ je $2r$. Zoberme dva nové prvky $\beta,\ \gamma \notin Z_n$. Pre fixné $a \in \mathbb{Z}_n - \{0\}$ si zoberme neusporiadané trojice druhého typu
	
	$$\langle              a,              a,  -2          a \rangle,$$
	$$\langle  -2          a,  -2          a, (-2)^2       a \rangle,$$
	$$\langle (-2)^2       a, (-2)^2       a, (-2)^3       a \rangle,$$
	$$\langle (-2)^3       a, (-2)^3       a, (-2)^4       a \rangle,$$
	$$\vdots$$
	$$\langle (-2)^{2r - 2}a, (-2)^{2r - 2}a, (-2)^{2r - 1}a \rangle,$$
	$$\langle (-2)^{2r - 1}a, (-2)^{2r - 1}a,              a \rangle = \langle (-2)^{2r - 1}a, (-2)^{2r - 1}a, (-2)^{2r}a \rangle.$$
	Pre $i \in \{0, 1, \dots, r-1\}$, trojicu $\langle (-2)^{2i}a, (-2)^{2i}a, (-2)^{2i + 1}a \rangle$ nahradíme trojicou $\langle (-2)^{2i}a, \alpha, (-2)^{2i + 1}a \rangle$ a trojicu $\langle (-2)^{2i + 1}a, (-2)^{2i + 1}a, (-2)^{2i + 2}a \rangle$ nahradíme trojicou $\langle (-2)^{2i}a, \alpha, (-2)^{2i + 1}a \rangle$. Dostaneme teda trojice typu
	\begin{align*}
	\langle              a,              a,  -2          a \rangle \quad \rightarrow& \quad \langle              a,         \alpha,  -2          a \rangle,\\
	\langle  -2          a,  -2          a, (-2)^2       a \rangle \quad \rightarrow& \quad \langle  -2          a,          \beta, (-2)^2       a \rangle,\\
	\langle (-2)^2       a, (-2)^2       a, (-2)^3       a \rangle \quad \rightarrow& \quad \langle (-2)^2       a,         \alpha, (-2)^3       a \rangle,\\
	\langle (-2)^2       a, (-2)^2       a, (-2)^3       a \rangle \quad \rightarrow& \quad \langle (-2)^2       a,          \beta, (-2)^3       a \rangle,\\
	\vdots&\\
	\langle (-2)^{2r - 2}a, (-2)^{2r - 2}a, (-2)^{2r - 1}a \rangle \quad \rightarrow& \quad \langle (-2)^{2r - 2}a,         \alpha, (-2)^{2r - 1}a \rangle,\\
	\langle (-2)^{2r - 1}a, (-2)^{2r - 1}a,              a \rangle \quad \rightarrow& \quad \langle (-2)^{2r - 1}a,          \beta,              a \rangle.
	\end{align*}
	Pokiaľ nám ostala ešte nejaká trojica $\langle b, b, -2b \rangle$ typu 2, tento postup s ňou zopakujeme, pokým všetky trojice typu dva takto nenahradíme.
	Nakoniec trojicu $\langle 0, 0, 0 \rangle$ nahradíme trojicou $\langle 0, \alpha, \beta \rangle$. Všetky trojice typu 1 ponecháme. Všetky nové trojice obsahujú tri rôzne prvky, už len ukážeme, že tvoria STS $(X, \mathcal{B})$ s nosnou množinou $X = \mathbb{Z}_n \cup \{\alpha, \beta \}$.
	
	Zoberme si ľubovoľnú dvojicu prvkov $a,\ b \in X$. Ak $\{ a, b \} = \{ \alpha, \beta \}$, tak sa $\{a, b\}$ nachádza v práve jednej trojici $\{0, \alpha, \beta \}$. Pokiaľ $a = \alpha$ a $b \in \mathbb{Z}_n$, tak $\alpha$ sa vyskytuje len v trojiciach typu 2. V nich sa $b$ vyskytuje iba v trojiciach $\langle b, b, -2b \rangle$ a $\langle (-2)^{-1}b, (-2)^{-1}b, b \rangle$. Práve jednu z nich sme prerobili na trojicu obsahujúcu $\alpha$, $b$. Prípad $a = \beta$, $b \in \mathbb{Z}_n$ je podobný.
	
	Pokiaľ $a \ne b \in \mathbb{Z}_n$, tak nech $c = - a - b$. Pokiaľ $a \ne c \ne b$, tak $\{a, b, c\}$ je jediná trojica obsahujúca $\{a, b\}$. Inak BUNV $c = a$. Potom $b = -2a$ a prvky $a$ a $-2a$ sa nachádzajú spolu v práce jednej trojici spolu s buď $\alpha$, alebo $\beta$.
\end{proof}

\begin{theorem_hard}{Wilson-Schreiberova konštrúkcia (všeobecnejšia)}\\
	Nech $n \equiv \pm 1 \pmod{6}$ a nech $A$ je Abelovská grupa rádu $n$, v ktorej $-2$ má párny multiplikatívny rád. Potom existuje STS rádu $n + 2$. 
\end{theorem_hard}

Táto veta využíva, že každá Abelovská grupa sa dá zapísať (vzhľadom na izomorfizus) ako súčin cyklických grúp. Pomocou nich možno definovať $-2$ ako $(-2,-2, \dots, -2)$, násobenie a multiplikatívny rád.

\TODO Boséova konštrukcia

\TODO Skolemova konštrukcia

\TODO Cyklické STS

\TODO Symetrické $v_3$-konfigurácie (čiastočné STS)

\begin{hypothesis}
Každý bezmostový kubický graf má 6 1-faktorov takých, že každá hrana grafu leží v práve 2 z nich.
\end{hypothesis}


\begin{definition}
Dvojica $(X, \mathcal{B})$, kde $\mathcal{B} \in \powerset(X)$, je $t-(v, k, \lambda)$-blokový plán (angl. \emph{$t$-design}), ak:
\begin{itemize}
    \item $\ssize{X} = v$
    \item $\forall B \in \mathcal{B}: \ssize{B} = k$
    \item každá $t$-tica objektov z $X$ sa vyskytuje v práve $\lambda$ blokoch z $\mathcal{B}$
\end{itemize}

Navyše, blokové plány typu $t-(v,k,1)$ budeme označovať ako $S(t,k,v)$.
\end{definition}

\begin{remark}
Existencia $t-(v,k,\lambda)$-blokového plánu je ekvivalentná s existenciou rozkladu $t$-uniformného $\lambda$-násobného hypergrafu na hyperklíky veľkosti $k$.
\end{remark}

\begin{remark}
STS s $v$ prvkami môžeme značiť ako $S(2,3,v)$.
\end{remark}

\begin{definition}
Blokové plány $S(3,4,v)$ voláme Steinerovské systémy štvoríc (angl. \emph{SQS})
\end{definition}

\begin{theorem_hard}

$\exists S(3,4,v) \Longleftrightarrow v \equiv 3,4 \mod 6$

\end{theorem_hard}


\begin{definition}
Blokové plány $S(4,5,v)$ voláme Steinerovské systémy pätíc
\end{definition}


\begin{theorem_hard}

$\exists S(4,5,v) \Longrightarrow v \equiv 4,5 \mod 6 \wedge v \not\equiv 4 \mod 5$

\end{theorem_hard}

\TODO konečné jednoduché grupy.
